---
layout: post
author: ledinhtrunghieu
title: Lesson 14 - Introduction to AWS Boto in Python
---

# 1. Putting Files in the Cloud

Learning how AWS works to creating S3 buckets and uploading files to them. 

## 1.1. Intro to AWS and Boto3

**What is Boto3**

To interact with AWS in Python, we use the Boto3 library. 

```python
import 

s3 = boto3.client('s3',
                  region_name='us-east-1', 
                  aws_access_key_id=AWS_KEY_ID, 
                  aws_secret_access_key=AWS_SECRET)

response = s3.list_buckets()


```

We initialize the client with an AWS service name, region, key and secret. The service name can be any of the 100+ available AWS services. The region is the geo region where our resources are located. **Key** and **secret** are like a username and password to an AWS account.

**Creating keys with IAM**

<img src="/assets/images/20210505_AWSBoto/pic1.png" class="largepic"/>

* Creating an account at aws.amazon.com gives us access to the AWS Console. Anything we do here to manage our web services, we can do in Boto3 in Python.
* To log into the console, we use the username/password we signed up with. This is the root user.
* To create the key/secret for Boto3, we are going to use **IAM** or **Identity Access Management Service**. We create IAM sub-users to control access to AWS resources in our account. Credentials - or the key / secret combo are what authenticate IAM users.

**AWS services**
* **S3** or **Simple Storage Service** lets us store files in the cloud.
* **SNS** or **Simple Notification Service** lets us send emails and texts to alert subscribers based on events and conditions in our data pipelines.
* **Comprehend** performs sentiment analysis on blocks of text.
* **Rekognition** to extracts text from images and look for cats in a picture
* **RDS**, **EC2**, **Lambda** and other common services.


**Multiple clients**
```python
# Generate the boto3 client for interacting with S3 and SNS
s3 = boto3.client('s3', region_name='us-east-1', 
                         aws_access_key_id=AWS_KEY_ID, 
                         aws_secret_access_key=AWS_SECRET)

sns = boto3.client('sns', region_name='us-east-1', 
                         aws_access_key_id=AWS_KEY_ID, 
                         aws_secret_access_key=AWS_SECRET)

# List S3 buckets and SNS topics
buckets = s3.list_buckets()
topics = sns.list_topics()

# Print out the list of SNS topics
print(topics)
```

## 1.2. Diving into buckets

**S3** lets us put any file in the cloud and make it accessible anywhere in the world through a URL

**S3 Components - Buckets**
* **Buckets** are like folders on our desktop. **Objects** are like files within those folders. 
* Buckets have their own permissions policies. 
* Can be configured to act as folders for a static website
* Can generate **logs** about their own activity and write them to a different bucket.
* **Contain Object**


**S3 Components - Objects**
<img src="/assets/images/20210505_AWSBoto/pic2.png" class="largepic"/>
An object can be anything - an image, a video file, CSV or a log file.

**What can we do with buckets**
* Create Bucket
* List Buckets 
* Delete Bucket

```python
import boto3
s3 = boto3.client('s3', 
                  region_name='us-east-1',
                  aws_access_key_id=AWS_KEY_ID, 
                  aws_secret_access_key=AWS_SECRET)
```

**Creating a Bucket**
```python
bucket = s3.create_bucket(Bucket='gid-requests')
```
We call the client's create_bucket method, passing the bucket name as the argument.


**List Buckets**
```python
bucket_response = s3.list_buckets()
```
When S3 responds, it will give us some additional response metadata. it will include a dictionary under the Buckets key. 

**Get Buckets Dictionary**
```python
buckets = bucket_response['Buckets'] 
print(buckets)
```
<img src="/assets/images/20210505_AWSBoto/pic3.png" class="largepic"/>
We can see our new bucket name and the time that it was created. Now that we have this dictionary, we can run it through a for loop and perform an operation on multiple buckets.

**Deleting Buckets**
```python
response = s3.delete_bucket('gid-requests')
```

## 1.3. Uploading and retrieving files






# 5. Reference

1. [Introduction to AWS Boto in Python- DataCamp](https://learn.datacamp.com/courses/introduction-to-aws-boto-in-python)